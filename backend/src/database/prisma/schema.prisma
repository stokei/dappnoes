generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

enum RoomStatus {
  WAITING
  PLAYING
  FINISHED
}

enum GameMoveType {
  PLAY
  DRAW
  PASS
}

model Room {
  id         String     @id @default(auto()) @map("_id") @db.ObjectId
  name       String
  owner      String
  entryFee   Int
  maxPlayers Int
  status     RoomStatus @default(WAITING)
  lastMove   String?
  winner     String?

  createdAt String
  updatedAt String
}

model RoomPlayer {
  id     String @id @default(auto()) @map("_id") @db.ObjectId
  room   String
  player String

  createdAt String
  updatedAt String

  @@unique([room, player])
}

model GameMove {
  id     String       @id @default(auto()) @map("_id") @db.ObjectId
  room   String
  player String
  type   GameMoveType
  move   String?

  createdAt String
  updatedAt String
}
